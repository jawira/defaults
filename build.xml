<?xml version="1.0" encoding="UTF-8" ?>

<project name="Skeleton" default="diagnostics">

    <!--TARGETS-->
    <target name="diagnostics">
        <diagnostics/>
    </target>

    <target name="readme:update" description="Update tree from readme file">
        <property name="tree.path" value="/usr/bin/tree"/>
        <exec executable="${tree.path}" outputProperty="tree">
            <arg value="-a"/>
            <arg value="resources/warehouse/"/>
        </exec>
        <reflexive file="README.md">
            <filterchain>
                <replaceregexp>
                    <regexp pattern="&lt;!--tree:start--&gt;.*&lt;!--tree:end--&gt;"
                            replace="&lt;!--tree:start--&gt;${line.separator}```${line.separator}${tree}${line.separator}```${line.separator}&lt;!--tree:end--&gt;"
                            modifiers="Us"/>
                </replaceregexp>
            </filterchain>
        </reflexive>
    </target>

    <target name="changelog:links" description="Update links in composer.json">
        <composer command="require">
            <arg value="symplify/changelog-linker"/>
        </composer>
        <exec executable="vendor/bin/changelog-linker">
            <arg value="link"/>
        </exec>
        <composer command="remove">
            <arg value="symplify/changelog-linker"/>
        </composer>
    </target>

</project>
