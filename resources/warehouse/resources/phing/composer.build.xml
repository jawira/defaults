<?xml version="1.0" encoding="UTF-8" ?>

<project name="Composer" description="Composer dependency manager" default="composer:version">

    <target name="composer:version" description="Version installed">
        <composer>
            <arg value="--no-interaction"/>
            <arg value="--version"/>
        </composer>
    </target>

    <target name="composer:optimize" description="Optimize autoload for production">
        <composer command="dump-autoload">
            <arg value="--optimize"/>
            <arg value="--no-interaction"/>
        </composer>
    </target>

    <target name="composer:validate" description="Validate composer.json">
        <composer command="validate">
            <arg value="--no-interaction"/>
            <arg value="--profile"/>
            <arg value="--strict"/>
        </composer>
    </target>

    <target name="composer:install-dev" description="Install for dev">
        <composer command="install">
            <arg value="--no-suggest"/>
            <arg value="--no-interaction"/>
            <arg value="--profile"/>
            <arg value="--prefer-dist"/>
        </composer>
    </target>

    <target name="composer:install" description="Install for prod">
        <composer command="install">
            <arg value="--no-suggest"/>
            <arg value="--no-interaction"/>
            <arg value="--profile"/>
            <arg value="--prefer-dist"/>
            <arg value="--no-dev"/>
        </composer>
        <phingcall target="composer:optimize"/>
    </target>

</project>
